"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var gdprCookie=function(){function t(){_classCallCheck(this,t),this._title="Cookies",this._cookie_secure=2,this._main_container,this._listeners_added=!1,this._cookie,this._from_settings_button=!1,this._types=new Array({type:"mandatory",text:"Cookies λειτουργικότητας",default:!0,detailsText:"Τα cookies αυτά είναι απαραίτητα γιατί επιτρέπουν την πλοήγηση στον ιστότοπό μας καθώς και τη χρήση των λειτουργιών του ιστότοπου."}),this._cookie_name="gdpr_cookie",this._expires=30,this._btn_settings,this._cookie_path="/",this._btn_settings_text,this._btn_hide_settings,this._btn_hide_settings_text,this._btn_accept,this._btn_accept1,this._btn_accept_text,this._intro_text="",this._settings_text="",this._class_prefix="gdpr-cookie",this._position="bottom",this.settingscont,this.messagecont}return _createClass(t,[{key:"getCookie",value:function(t){t+="=";for(var e=document.cookie.split(";"),i=0;i<e.length;i++){for(var n=e[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return JSON.parse(n.substring(t.length,n.length))}}},{key:"setCookie",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._cookie_name,e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._expires,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._cookie_path,s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3);var o="expires="+s.toUTCString(),c="";2==this._cookie_secure?location.protocol&&"https:"==location.protocol&&(c=";secure"):1==this._cookie_secure&&(c=";secure"),document.cookie=t+"="+JSON.stringify(e)+"; "+o+"; path="+n+c}},{key:"deleteCookie",value:function(t){setCookie(t,"",-1)}},{key:"check",value:function(){var t=this;if(this._cookie=this.getCookie(this._cookie_name),!this._cookie||this._cookie&&!this._cookie.accepted){var e={accepted:!1};if(this._types.length>1)for(var i=1;i<this._types.length;i++)e[""+this._types[i].type]=this._types[i].default;this.setCookie(this._cookie_name,e,this._expires),this._cookie=this.getCookie(this._cookie_name)}document.addEventListener("DOMContentLoaded",function(e){t.domLoaded()})}},{key:"domLoaded",value:function(t){var e=this;this._main_container=document.createElement("div"),this._main_container.style.display="none",this._main_container.classList.add("gdpr-cookie-container"),this._main_container.classList.add(this._class_prefix+"-container");var i=document.createElement("div");i.classList.add("gdpr-cookie-inner-container");var n=document.createElement("h2");n.id="gdpr-cookie-title",n.setAttribute("align","center"),n.innerHTML=this._title,i.appendChild(n),this.messagecont=document.createElement("div"),this.messagecont.id="gdpr-cookie-message";for(var s=document.createElement("table"),o=document.createElement("tbody"),c=0;c<1;c++){for(var a=document.createElement("tr"),_=0;_<2;_++){var r=void 0;(r=document.createElement("td")).setAttribute("valign","middle"),0==_?(r.setAttribute("align","left"),r.innerHTML=this._intro_text):(this._btn_accept=document.createElement("button"),this._btn_accept.className="gdpr-accept-btn",this._btn_accept.innerText=this._btn_accept_text,r.appendChild(this._btn_accept),this._btn_settings=document.createElement("button"),this._btn_settings.id="gdpr-show-cookie-settings",this._btn_settings.innerText=this._btn_settings_text,r.appendChild(this._btn_settings)),a.appendChild(r)}o.appendChild(a)}s.appendChild(o),this.messagecont.appendChild(s),this.settingscont=document.createElement("div"),this.settingscont.style.display="none",this.settingscont.id="gdpr-cookie-settings",s=document.createElement("table"),o=document.createElement("tbody");for(var d=0;d<1;d++){for(var h=document.createElement("tr"),l=0;l<2;l++){var p=void 0;if((p=document.createElement("td")).setAttribute("valign","middle"),0==l){p.setAttribute("align","left");var u=document.createElement("p");u.innerHTML=this._settings_text,p.appendChild(u);for(var g=document.createElement("table"),m=document.createElement("tbody"),k=void 0,y=void 0,b=void 0,f=void 0,v=0;v<this._types.length;v++){k=document.createElement("tr");for(var x=0;x<2;x++)(y=document.createElement("td")).setAttribute("valign","top"),0==x?((b=document.createElement("input")).type="checkbox",0==v?(b.disabled=!0,b.checked=!0):b.checked=this._cookie[this._types[v].type],b.id="gdpr-cookie-checkbox-"+this._types[v].type,y.appendChild(b)):(f=document.createTextNode(this._types[v].text),y.appendChild(f),(f=document.createElement("p")).classList.add("details-txt"),f.innerHTML="<i>"+this._types[v].detailsText+"</i>",y.appendChild(f)),k.appendChild(y);m.appendChild(k)}g.appendChild(m),p.appendChild(g)}else{var C=void 0;C=document.createElement("p"),this._btn_hide_settings=document.createElement("button"),this._btn_hide_settings.id="gdpr-hide-cookie-settings",this._btn_hide_settings.innerText=this._btn_hide_settings_text,C.appendChild(this._btn_hide_settings),p.appendChild(C),this._btn_accept1=document.createElement("button"),this._btn_accept1.className="gdpr-accept-btn",this._btn_accept1.id="gdpr-accept-btn",this._btn_accept1.innerText=this._btn_accept_text,p.appendChild(this._btn_accept1)}h.appendChild(p)}o.appendChild(h)}s.appendChild(o),this.settingscont.appendChild(s),document.getElementsByClassName("gdpr_settings_button").length&&document.getElementsByClassName("gdpr_settings_button")[0].addEventListener("click",function(t){t.preventDefault(),e._from_settings_button=!0,e.settingscont.style.display="block",e.messagecont.style.display="none",e._main_container.style.display="block"}),i.appendChild(this.messagecont),i.appendChild(this.settingscont),this._main_container.appendChild(i),document.body.firstChild?document.body.insertBefore(this._main_container,document.body.firstChild):document.body.appendChild(this._main_container),this.showcookie()}},{key:"showcookie",value:function(){this._cookie.accepted||(this._main_container.style.display="block"),this.addlisteners()}},{key:"accept",value:function(){if(this.settingscont.style.display="block",this.messagecont.style.display="none",this._cookie.accepted=!0,this._types.length>1)for(var t=1;t<this._types.length;t++)this._cookie[""+this._types[t].type]=document.getElementById("gdpr-cookie-checkbox-"+this._types[t].type).checked;this.setCookie(this._cookie_name,this._cookie,this._expires),this._main_container.style.display="none"}},{key:"addlisteners",value:function(){var t=this;this._listeners_added||(this._listeners_added=!0,this._btn_hide_settings.addEventListener("click",function(e){t.settingscont.style.display="none",t.messagecont.style.display="block",t._from_settings_button&&(t._from_settings_button=!1,t._main_container.style.display="none")}),this._btn_settings.addEventListener("click",function(e){t.settingscont.style.display="block",t.messagecont.style.display="none"}),this._btn_accept1.addEventListener("click",function(e){t.accept()}),this._btn_accept.addEventListener("click",function(e){t.accept()}))}},{key:"cookie",get:function(){return this._cookie}},{key:"cookie_name",get:function(){return this._cookie_name},set:function(t){this._cookie_name=t}},{key:"expires",get:function(){return this._expires},set:function(t){if(!/^[0-9]*$/i.test(t))throw new Error("Only numbers allowed");this._expires=parseInt(t)}},{key:"types",get:function(){return this._types},set:function(t){if(!Array.isArray(t))throw new Error("Value must be an array of objects");for(var e=0;e<t.length;e++)this._types.push(t[e])}},{key:"position",get:function(){return this._position},set:function(t){"top"!=t&&"bottom"!=t&&"full"!=t||(this._position=t,this._class_prefix="gdpr-cookie-"+t)}},{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"intro_text",get:function(){return this._intro_text},set:function(t){this._intro_text=t}},{key:"cookie_type_mandatory_text",get:function(){return this._types[0].text},set:function(t){this._types[0].text=t}},{key:"cookie_type_mandatory_detailsText",get:function(){return this._types[0].detailsText},set:function(t){this._types[0].detailsText=t}},{key:"settings_text",get:function(){return this._settings_text},set:function(t){this._settings_text=t}},{key:"btn_settings_text",get:function(){return this._btn_settings_text},set:function(t){this._btn_settings_text=t}},{key:"btn_hide_settings_text",get:function(){return this._btn_hide_settings_text},set:function(t){this._btn_hide_settings_text=t}},{key:"btn_accept_text",get:function(){return this._btn_accept_text},set:function(t){this._btn_accept_text=t}},{key:"cookie_path",get:function(){return this._cookie_path},set:function(t){this._cookie_path=t}},{key:"cookie_secure",get:function(){return this._cookie_secure},set:function(t){this._cookie_secure=t}}]),t}();